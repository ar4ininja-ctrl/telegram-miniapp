<button class="btn btn-primary cart-btn" data-bs-toggle="modal" data-bs-target="#cartModal">üõí</button>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫–æ—Ä–∑–∏–Ω—ã -->
  <div class="modal fade" id="cartModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">üõí –í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body" id="cartItems">
          –ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞
        </div>
        <div class="modal-footer">
          <h5 class="me-auto" id="cartTotal">–ò—Ç–æ–≥–æ: 0 ‚ÇΩ</h5>
          <button class="btn btn-success" onclick="checkout()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    let tg = window.Telegram.WebApp;
    tg.expand();

    let cart = [];

    function addToCart(item, price) {
      cart.push({item, price});
      updateCart();
      tg.showAlert(`‚úÖ ${item} –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É!`);
    }

    function updateCart() {
      let cartItems = document.getElementById("cartItems");
      let cartTotal = document.getElementById("cartTotal");
      if (cart.length === 0) {
        cartItems.innerHTML = "–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞";
        cartTotal.innerText = "–ò—Ç–æ–≥–æ: 0 ‚ÇΩ";
        return;
      }

      cartItems.innerHTML = "";
      let total = 0;
      cart.forEach((p, i) => {
        cartItems.innerHTML += <p>${p.item} ‚Äî ${p.price} ‚ÇΩ <button class="btn btn-sm btn-danger" onclick="removeItem(${i})">‚úñ</button></p>;
        total += p.price;
      });
      cartTotal.innerText = "–ò—Ç–æ–≥–æ: " + total.toLocaleString("ru-RU") + " ‚ÇΩ";
    }

    function removeItem(index) {
      cart.splice(index, 1);
      updateCart();
    }

    function checkout() {
      if (cart.length === 0) {
        tg.showAlert("‚ùå –ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞!");
        return;
      }
      tg.sendData(JSON.stringify({action: "checkout", cart: cart}));
      tg.showAlert("‚úÖ –ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –±–æ—Ç—É!");
      cart = [];
      updateCart();
    }
  </script>
</body>
</html>
